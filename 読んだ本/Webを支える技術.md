Webを支える技術を読んで知ったこと

## Rest
* RESTはWebのアーキテクチャスタイル
（アーキテクチャスタイルは作法とか流儀を指す
MVCモデルとか）
* Restは６つのアーキテクチャによって構成される
```
1. クライアント/サーバー方式
    ユーザーとインターフェースと処理を分離する
2. ステートレスサーバ
    サーバー側でアプリケーション状態を持たない
3. キャッシュ
    クライアントとサーバの通信回数と量を減らす
4. 統一インターフェース
    インターフェースを固定する
5. 階層化システム
    システムを階層に分離する
6. コードオンデマンド
    プログラムをクライアントにダウンロードして実行する
```
設計するときはRestの考えたに沿って設計するとあまりブレない
ただし、絶対にその通りにする必要もないので状況に応じて対応する

## HTTP
* HTTPとはRFC2616で規定されたプロトコル
[RFCとは](https://www.nic.ad.jp/ja/newsletter/No24/090.html)

* HTTPではクライアントが出したリクエストをサーバーで処理してレスポンスを返す
このようなプロトコルはリクエスト/レスポンス型プロトコルと呼ぶ。

#### HTTPメッセージ
メッセージはステートレスで送られる
ステートレスとはサーバーに情報を保管せずに、リクエストに全ての情報を乗っける仕組み
##### リクエストメッセージ
リクエストライン、ヘッダ、ボディにて構成される
```
GET /test HTTP/1.1
HOST: example.jp 
```
* リクエストメッセージの一行目はリクエストラインと呼ばれ、メソッド(GET)、リクエストURI(/test)、プロトコルバージョン(HTTP/1.1)で構成される

* ２行目以降はヘッダが続く。メッセージのメタデータ。
    例ではHOSTにexample.jpが結び付けられている。
* ヘッダのあとにボディが続くこともある。ボディにはそのメッセージを表す本質的な情報が入る。
##### レスポンスメッセージ
ステータスライン、ヘッダ、ボディにて構成される
``` 
HTTP/1.1 200 OK
Content-Type: application/xhtml+xml; charaset=utf-8

<html xmls="http://~">
...
</html>
```
* レスポンスメッセージの一行目はステータスラインと呼び、
プロトコルバージョン（HTTP/1.1）ステータスコード(200)、テキストフレーズ(OK)からなる。

* レスポンスメッセージの2行目以降は、ヘッダとなる。メタデータが入る。

* ボディ、例だと`<html>`のところからになる。

#### HTTPメソッド
全８種類
``` 
GET:リソースの取得
POST:子リソースの作成、リソースへのデータ追加、その他の処理
PUT:リソースの更新、リソースの作成
DELETE:リソースの削除
HEAD:リソースのヘッダの取得
OPTION:リソースがサポートしているメソッドの取得
TRACE:自分宛にリクエストメッセージを返す（試験用）
CONNECT:プロキシ動作のトンネル接続への変更
```
TRACEとCONNECTはほとんど使用されていない
##### HTTPメソッドのべき等性と安全性
べき等性とは「ある操作を何回おなこなっても結果が同じこと」
```
GET、HEAD→べき等かつ安全
PUT、DELETE→べき等だが安全でない
POST→べき等でも安全でもない
```
※POSTは万能メソッドで割となんでもできるが、べき等かつ安全ではないので他のメソッドが使える場合はそちらを優先すること

##### ステータスコードの分類
レスポンスメッセージの１行目に含まれるステータスコードの分類
404エラーとかの話
```
1.xx:処理中
2.xx:成功
3.xx:リダイレクト
4.xx:クライアントエラー
5.xx:サーバエラー
```
頭の数字で状態がわかるようになっている。
また、設計する場合はステータスコードを意識して設計する必要がある。
特に重要なのは4.xx1系のエラーコードで、多様なステータスコードがあるのできちんと選択すること
